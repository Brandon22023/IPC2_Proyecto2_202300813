<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Página con Pestañas</title>
    <style>
      /* Estilos para las pestañas */
      .tab {
        overflow: hidden;
        background-color: #f1f1f1;
      }

      .tab a {
        float: left;
        padding: 14px 16px;
        text-decoration: none;
        transition: 0.3s;
        color: black;
        border: 1px solid #ccc;
        margin-right: 4px;
      }

      .tab a:hover {
        background-color: #ddd;
      }

      .tab a.active {
        background-color: #ccc;
      }

      /* Estilos para el contenido de las pestañas */
      .tabcontent {
        padding: 6px 12px;
        border: 1px solid #ccc;
        margin-top: 10px;
      }
      /* Ocultar el input file original */
      input[type="file"] {
        display: none;
      }

      /* Botón personalizado */
      .custom-file-upload {
        display: inline-block;
        padding: 10px 20px;
        cursor: pointer;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 4px;
      }

      .custom-file-upload:hover {
        background-color: #0056b3;
      }
      /* Estilos para mensajes flash */
      .flash-success {
        background-color: #d4edda;
        color: #155724;
        padding: 15px;
        margin-bottom: 15px;
        border: 1px solid #c3e6cb;
        border-radius: 4px;
      }
      .flash-error {
        background-color: #f8d7da;
        color: #721c24;
        padding: 15px;
        margin-bottom: 15px;
        border: 1px solid #f5c6cb;
        border-radius: 4px;
      }
    </style>
  </head>
  <body>
    <h1>Proyecto2_IPC2</h1>

    <!-- Pestañas -->
    <div class="tab">
      <a href="{{ url_for('tab1') }}" class="{% if tab == 'Tab1' %}active{% endif %}">ARCHIVO</a>
      <a href="{{ url_for('tab2') }}" class="{% if tab == 'Tab2' %}active{% endif %}">REPORTES</a>
      <a href="{{ url_for('tab3') }}" class="{% if tab == 'Tab3' %}active{% endif %}">AYUDA</a>
    </div>

    <!-- Contenido de las pestañas -->
    <div class="tabcontent">
      {% if tab == 'Tab1' %}
        <h2>Por favor seleccione el archivo</h2>
        <p></p>
         <!-- Formulario para cargar el archivo -->
         <form method="POST" enctype="multipart/form-data" action="{{ url_for('tab1') }}">
          <label for="file" class="custom-file-upload">Seleccionar archivo</label>
          <input type="file" name="file" id="file" onchange="this.form.submit();">
         </form>

         <!-- Mostrar mensajes de Flask -->
        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            {% for category, message in messages %}
              <div class="flash-{{ category }}">{{ message }}</div>
            {% endfor %}
          {% endif %}
        {% endwith %}

        <h2>Máquinas</h2>
        <!-- Formulario para seleccionar máquina -->
        <form method="post">
          <select name="maquina" onchange="this.form.submit()">
              <option value="">Selecciona una máquina</option>
              {% for maquina in cola_maquinas %}
              <option value="{{ maquina.nombre_maquina }}">{{ maquina.nombre_maquina }}</option>
              {% endfor %}
          </select>
          <button type="submit">Mostrar Productos</button>
        </form>

        {% if productos %}
            <h3>Productos de la máquina seleccionada:</h3>
            <ul>
                {% for producto in productos %}
                    <li>{{ producto.nombre_producto }}: {{ producto.elaboracion }}</li>
                {% endfor %}
            </ul>
        {% else %}
            <p>No hay productos disponibles para esta máquina.</p>
        {% endif %}
    


      {% elif tab == 'Tab2' %}
        <h2>REPORTE DEL HTML</h2>
        <p>usar tabla de resultados</p>
        <h2>REPORTE DE TDAS</h2>
      {% elif tab == 'Tab3' %}
        <h2>DATOS: </h2>
        <p>Nombre: Brandon Antonio Marroquín Pérez</p>
        <p>Carnet: 202300813</p>
        <p>Carrera: Ingeniería en Ciencias y Sistemas</p>
        <p>Curso: INTRODUCCIÓN A LA PROGRAMACIÓN Y COMPUTACIÓN 2 Sección N</p>
        <p>CUI: 3045062060114</p>
        <p>Semestre: 4</p>
        <p>Link de la documentacion:________________________________</p>
      {% endif %}
    </div>
  </body>
</html>